import"../chunks/DsnmJJEf.js";import"../chunks/DNLp4hA6.js";import{z as $,P as w,Q as j,G as y,H as T,T as c,R as u,L as o,U as F,S as l,X as q,C as I,an as X,W as J,al as K,A as L,a7 as Y}from"../chunks/C7V4xyOV.js";import{i as R}from"../chunks/BoPhF24d.js";import{a as b,f as k,c as V,d as Z,g as tt,e as U,P as et,h as G,S as rt,i as E}from"../chunks/CZfX0bvN.js";import{i as N}from"../chunks/C21uw8pi.js";import{M as at,T as ot}from"../chunks/DZKp9z-9.js";import{T as st}from"../chunks/CvMMFiJ5.js";const H=Symbol.for("constructDateFrom");function W(t,e){return typeof t=="function"?t(e):t&&typeof t=="object"&&H in t?t[H](e):t instanceof Date?new t.constructor(e):new Date(e)}function nt(t,...e){const a=W.bind(null,e.find(r=>typeof r=="object"));return e.map(a)}function lt(t){return W(t,Date.now())}function ct(t,e,a){const[r,s]=nt(a?.in,t,e);return r.getFullYear()===s.getFullYear()&&r.getMonth()===s.getMonth()}function O(t,e){return ct(W(t,t),lt(t))}var it=w('<p class="text-sm"> </p>'),ut=w('<section class="flex items-center justify-between"><div><h5 class="svelte-gpgq6p">Montly budget</h5> <h3 class="svelte-gpgq6p"> </h3></div> <div><h5 class="svelte-gpgq6p">Expenses</h5> <h3 class="svelte-gpgq6p"> </h3> <!></div> <div><h5 class="svelte-gpgq6p">Income</h5> <h3 class="svelte-gpgq6p"> </h3></div></section>');function vt(t,e){$(e,!0);const a=b.incomes.filter(m=>{const f=new Date(m.date);return O(f)}),r=b.expenses.filter(m=>{const f=new Date(m.date);return O(f)}),s=b.budgets,i=q(()=>r.reduce((m,f)=>m+parseFloat(f.amount),0)),p=q(()=>a.reduce((m,f)=>m+parseFloat(f.amount),0)),n=q(()=>s.reduce((m,f)=>m+parseFloat(f.amount),0)),v=q(()=>o(i)/o(p)*100);var _=ut(),h=u(_),x=c(u(h),2),S=u(x,!0);l(x),l(h);var d=c(h,2),g=c(u(d),2),C=u(g,!0);l(g);var B=c(g,2);{var A=m=>{var f=it(),P=u(f);l(f),j(Q=>F(P,`${Q??""}% of income`),[()=>o(v).toFixed(0)]),y(m,f)};R(B,m=>{o(p)>0&&o(i)>0&&m(A)})}l(d);var D=c(d,2),M=c(u(D),2),z=u(M,!0);l(M),l(D),l(_),j((m,f,P)=>{F(S,m),F(C,f),F(z,P)},[()=>k(o(n).toString(),{compact:!0,currency:b.settings.currencyCode}),()=>k(o(i).toString(),{compact:!0,currency:b.settings.currencyCode}),()=>k(o(p).toString(),{compact:!0,currency:b.settings.currencyCode})]),y(t,_),T()}var dt=w('<div class="data-cell flex justify-between items-center relative svelte-ohqlh8"><p class="svelte-ohqlh8"> </p> <!></div> <!> <p class="data-cell svelte-ohqlh8"> </p> <p class="data-cell svelte-ohqlh8"> </p>',1);function pt(t,e){$(e,!0);const a=q(()=>Z(e.budget.amount));async function r(g){await b.editBudget(e.budget.id,g)}var s=dt(),i=I(s),p=u(i),n=u(p,!0);l(p);var v=c(p,2);V(v,{class:"delete-btn",size:"small",variant:"ghost",onclick:()=>b.deleteBudget(e.budget.id),children:(g,C)=>{st(g,{})},$$slots:{default:!0}}),l(i);var _=c(i,2);{let g=q(()=>tt(b.settings.currencyCode));at(_,{get symbol(){return o(g)},get amount(){return o(a)},onUpdate:r})}var h=c(_,2),x=u(h,!0);l(h);var S=c(h,2),d=u(S,!0);l(S),j((g,C)=>{F(n,e.budget.category?.title??" "),F(x,g),F(d,C)},[()=>k(e.budget.totalSpent,{currency:b.settings.currencyCode}),()=>k(e.budget.remaining,{currency:b.settings.currencyCode})]),y(t,s),T()}var gt=w('<ul class="expense-table svelte-deo1l0"><p class="table-heading svelte-deo1l0">Category</p> <p class="table-heading svelte-deo1l0">Total</p> <p class="table-heading svelte-deo1l0">Spent</p> <p class="table-heading svelte-deo1l0">Remaining</p> <!></ul>');function mt(t,e){$(e,!1),N();var a=gt(),r=c(u(a),8);U(r,1,()=>b.budgets,s=>s.category.id,(s,i)=>{pt(s,{get budget(){return o(i)}})}),l(a),y(t,a),T()}var ft=w('<button><i class="ph ph-plus"></i></button> <form><!> <!> <button class="btn btn-primary w-full">Add transaction</button></form>',1);function ht(t,e){$(e,!0);const a=new et;let r=K(""),s;async function i(){s&&(await b.createBudget(o(r),s?.id),a.open=!1)}var p=ft(),n=I(p);G(n,()=>({...a.trigger,class:"icon-btn icon-btn-medium icon-btn-grey"}));var v=c(n,2),_=()=>{};G(v,()=>({...a.content,class:"popup-overlay space-y-2 bg-white max-w-[350px] w-full",onsubmit:_}));var h=u(v);ot(h,{label:"Amount",get value(){return o(r)},set value(d){J(r,d,!0)}});var x=c(h,2);rt(x,{label:"Categories",get items(){return b.categories},toOption:d=>({label:d.title,value:d.id}),onChange:d=>s=d});var S=c(x,2);S.__click=i,l(v),y(t,p),T()}X(["click"]);var bt=w('<section><header class="flex items-center justify-between"><h6>Budget</h6> <!></header> <!></section>');function yt(t){var e=bt(),a=u(e),r=c(u(a),2);ht(r,{}),l(a);var s=c(a,2);mt(s,{}),l(e),y(t,e)}var _t=w('<li class="svelte-kdwo4m"><div class="graph-bar mb-1.5 svelte-kdwo4m"></div> <p class="category-title"> </p> <p class="text-sm text-text-muted"> </p></li>'),xt=w('<section class="space-y-2"><h6>Income streams</h6> <ul class="svelte-kdwo4m"></ul></section>');function wt(t,e){$(e,!1);const a=b.incomeAnalytics.sort((n,v)=>parseFloat(n.total)+parseFloat(v.total)).reverse(),r=a.reduce((n,v)=>n+parseFloat(v.total),0),s=["var(--color-blue-50)","var(--color-blue-100)","var(--color-blue-200)","var(--color-blue-300)","var(--color-blue-400)","var(--color-blue-500)","var(--color-blue-600)","var(--color-blue-700)","var(--color-blue-800)","var(--color-blue-900)"];N();var i=xt(),p=c(u(i),2);U(p,7,()=>a,n=>n.stream.id,(n,v,_)=>{var h=L(),x=I(h);{var S=d=>{const g=Y(()=>parseFloat(o(v).total)/r*100),C=Y(()=>s[(o(_)+5)%s.length]);var B=_t(),A=u(B),D=c(A,2),M=u(D,!0);l(D);var z=c(D,2),m=u(z);l(z),l(B),j(f=>{E(B,`--percent: ${o(g)}; --bar-color: ${o(C)}`),E(A,`--percent: ${o(g)}; --bar-color: ${o(C)}`),F(M,o(v).stream.title),F(m,`${f??""}%`)},[()=>o(g).toFixed(2)]),y(d,B)};R(x,d=>{parseFloat(o(v).total)>0&&d(S)})}y(n,h)}),l(p),l(i),y(t,i),T()}const St=t=>{t=t.filter(r=>r.category!==null).filter(r=>{try{const s=Date.parse(r.date);return O(s)}catch{return!1}});const e=new Set;t.forEach(r=>{e.add(r.category.id)});const a=[];for(const r of e){const i=t.filter(n=>n.category.id===r)[0].category,p=t.filter(n=>n.category.id===r).reduce((n,v)=>n+parseFloat(v.amount),0);a.push({category:i,total:p})}return a};var Ft=w('<li class="category-title"> </li> <li class="graph-bar svelte-1iwcqu7"></li>',1),qt=w('<section class="space-y-2"><h6>Spending</h6> <ul class="svelte-1iwcqu7"></ul></section>');function Ct(t,e){$(e,!0);const a=q(()=>St(b.expenses)),r=q(()=>Math.max(...o(a).map(n=>n.total))),s=["var(--color-purple-50)","var(--color-purple-100)","var(--color-purple-200)","var(--color-purple-300)","var(--color-purple-400)","var(--color-purple-500)","var(--color-purple-600)","var(--color-purple-700)","var(--color-purple-800)","var(--color-purple-900)"];var i=qt(),p=c(u(i),2);U(p,23,()=>o(a),n=>n.category.id,(n,v,_)=>{var h=L(),x=I(h);{var S=d=>{const g=q(()=>o(v).total/o(r)*100),C=q(()=>s[(o(_)+2)%s.length]);var B=Ft(),A=I(B),D=u(A,!0);l(A);var M=c(A,2);j(()=>{F(D,o(v).category.title),E(M,`--percent: ${o(g)}%;--bar-color:${o(C)}`)}),y(d,B)};R(x,d=>{o(v).total>0&&d(S)})}y(n,h)}),l(p),l(i),y(t,i),T()}var Bt=w('<main class="space-y-5 px-4 py-7 overflow-y-auto"><!> <div class="divider svelte-1m0gshv"></div> <!> <div class="divider svelte-1m0gshv"></div> <!> <div class="divider svelte-1m0gshv"></div> <!></main>');function zt(t){var e=Bt(),a=u(e);vt(a,{});var r=c(a,4);wt(r,{});var s=c(r,4);Ct(s,{});var i=c(s,4);yt(i),l(e),y(t,e)}export{zt as component};
